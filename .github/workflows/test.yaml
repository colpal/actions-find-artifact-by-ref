---
'on': push

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2

      - id: single
        uses: ./
        with:
          ref: initial-workflow-dispatch
          artifact_name: Banana

      - id: multiple
        uses: ./
        continue-on-error: true
        with:
          ref: initial-workflow-dispatch
          artifact_name: Apple

      - id: none
        uses: ./
        continue-on-error: true
        with:
          ref: initial-workflow-dispatch
          artifact_name: Cherry

      - if: "steps.single.outputs.artifact_id == 165488281 &&
             steps.multiple.outputs.error == 'multiple-artifacts' &&
             steps.none.outputs.error == 'no-artifacts'"
        run: exit
